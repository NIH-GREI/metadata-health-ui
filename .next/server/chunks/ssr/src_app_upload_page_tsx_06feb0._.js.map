{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/jshin/dev/metadata-health-ui/src/app/upload/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { toast } from 'react-toastify';\n\nexport default function UploadForm() {\n  const [file, setFile] = useState<File | null>(null);\n  const [fileName, setFileName] = useState(''); // Store the file name\n  const [message, setMessage] = useState('');\n\n  const router = useRouter();\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      setFile(e.target.files[0]); //This is the file being uploaded\n      setFileName(e.target.files[0].name); //Set the custom file name  which should match profile id\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file || !fileName.trim()) {\n      toast.error(\"Please select a file and enter a file name.\");\n      //setMessage('Please select a file and enter a file name.');\n      return;\n    }\n\n    // Ensure the filename has a .json extension\n    let finalFileName = fileName.trim();\n    if (!finalFileName.endsWith('.json')) {\n      finalFileName += '.json';\n    }\n\n    // Create a new File object with the desired name\n    const renamedFile = new File([file], finalFileName, { type: file.type });\n\n    const formData = new FormData();\n    formData.append('file', renamedFile); // Upload the renamed file\n\n    const response = await fetch('/api/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    const result = await response.json();\n\n    if (response.ok) {\n      // Store message in sessionStorage before redirect\n      sessionStorage.setItem('toastMessage', result.message || 'File uploaded successfully');\n\n      // Redirect to the new page\n      router.push(`/providers/${fileName}`);\n    } else {\n      toast.error(result.error || 'Upload failed.');\n    }\n    toast.error(result.message || result.error);\n    //  setMessage(result.message || result.error);\n  };\n\n\n  return (\n    <div className=\"flex flex-col items-center gap-4 p-6 bg-white shadow-lg rounded-lg w-96 mx-auto\">\n      <input\n        type=\"file\"\n        accept=\".json\"\n        onChange={handleFileChange}\n        className=\"file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600 cursor-pointer\"\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Enter simple file name or id\"\n\n        onChange={(e) => setFileName((e.target.value).trim().toLowerCase())}\n        className=\"border rounded-lg p-2 w-full\"\n      />\n      <button\n        onClick={handleUpload}\n        className=\"px-6 py-2 bg-green-500 text-white rounded-lg shadow hover:bg-green-600 transition\"\n      >\n        Upload\n      </button>\n      {/* {message && <p className=\"text-gray-700 text-sm\">{message}</p>} */}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,sBAAsB;IACpE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,mBAAmB,CAAC;QACxB,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG;YAC/C,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,GAAG,iCAAiC;YAC7D,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,GAAG,yDAAyD;QAChG;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,IAAI;YAC7B,mJAAA,CAAA,QAAK,CAAC,KAAK,CAAC;YACZ,4DAA4D;YAC5D;QACF;QAEA,4CAA4C;QAC5C,IAAI,gBAAgB,SAAS,IAAI;QACjC,IAAI,CAAC,cAAc,QAAQ,CAAC,UAAU;YACpC,iBAAiB;QACnB;QAEA,iDAAiD;QACjD,MAAM,cAAc,IAAI,KAAK;YAAC;SAAK,EAAE,eAAe;YAAE,MAAM,KAAK,IAAI;QAAC;QAEtE,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ,cAAc,0BAA0B;QAEhE,MAAM,WAAW,MAAM,MAAM,eAAe;YAC1C,QAAQ;YACR,MAAM;QACR;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,IAAI,SAAS,EAAE,EAAE;YACf,kDAAkD;YAClD,eAAe,OAAO,CAAC,gBAAgB,OAAO,OAAO,IAAI;YAEzD,2BAA2B;YAC3B,OAAO,IAAI,CAAC,CAAC,WAAW,EAAE,UAAU;QACtC,OAAO;YACL,mJAAA,CAAA,QAAK,CAAC,KAAK,CAAC,OAAO,KAAK,IAAI;QAC9B;QACA,mJAAA,CAAA,QAAK,CAAC,KAAK,CAAC,OAAO,OAAO,IAAI,OAAO,KAAK;IAC1C,+CAA+C;IACjD;IAGA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,MAAK;gBACL,QAAO;gBACP,UAAU;gBACV,WAAU;;;;;;0BAEZ,8OAAC;gBACC,MAAK;gBACL,aAAY;gBAEZ,UAAU,CAAC,IAAM,YAAY,AAAC,EAAE,MAAM,CAAC,KAAK,CAAE,IAAI,GAAG,WAAW;gBAChE,WAAU;;;;;;0BAEZ,8OAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAMP"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}